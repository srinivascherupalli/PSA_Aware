<apex:component >

    <apex:attribute name="tplanObj" description="TrainingPlanWithAchievement object rendered by component" type="TrainingPlanWithAchievement[]" required="true"/>

    <apex:outputPanel layout="none" rendered="{!tplanObj != null && tplanObj.size > 0}">
        <div class="slds-grid slds-wrap slds-grid--pull-padded">
            <apex:repeat value="{!tplanObj}" var="o" id="theRepeat">

                <apex:variable var="hasBadge" value="{!o.mainAchievement.Acquired_Image__c != null || o.mainAchievement.Work_Badge_Image_URL__c != null}" />

                <div class="tplan_box_container slds-p-horizontal--small slds-size--1-of-1 slds-medium-size--3-of-6 slds-large-size--4-of-12" onclick="almond.redirectHandlerWithStatus('{!JSENCODE(o.planDetailURL)}',true)">
                    <div class="tplan_box">
                        <apex:outputPanel layout="none" rendered="{!hasBadge}">
                            <div class="tplan_img">
                                <apex:outputField value="{!o.mainAchievement.Acquired_Image__c}"  rendered="{!o.mainAchievement.Work_Badge_Image_URL__c == null}"/>
                                <apex:image url="{!o.mainAchievement.Work_Badge_Image_URL__c}" rendered="{!o.mainAchievement.Work_Badge_Image_URL__c != null}"/>
                            </div>
                        </apex:outputPanel>
                        <div class="{!IF(hasBadge,'tplan_details','tplan_details_no_image')}" >
                            <div class="slds-text-heading--small tplan_box_title">{!o.planName}</div>
                            <apex:outputPanel layout="none" rendered="{!o.planEndDate != null && o.hideAfterEndDate && o.assignmentStatus != 'Completed'}">
                                <span class="plan-due-date">{!$Label.ALMS_Training_Plan_Due} : {!o.planEndDate}</span>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!o.planCompletedDate != null && o.assignmentStatus == 'Completed'}">
                                <span class="plan-due-date">{!$Label.ALMS_Training_Plan_Completed_Date} : {!o.planCompletedDate}</span>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none">
                                <span class="plan-due-date" style="color: #d01212;padding-top: 0px;">{!o.TrainingPlanType}</span>
                            </apex:outputPanel>
                        </div>
                        <apex:outputPanel rendered="{!o.newUntil != null && TODAY() <= o.newUntil}">
                            <div class="ribbon-wrapper-green"><div class="ribbon-green">{!$Label.ALMS_New_Training_Plan}</div></div>
                        </apex:outputPanel>
                    </div>
                </div>


            </apex:repeat>
        </div>
    </apex:outputPanel>
    <apex:outputPanel layout="none" rendered="{!tplanObj == null || tplanObj.size == 0}">
        <div style="width:100%;text-align:center;padding:20px;0;">
            <div class="slds-text-heading--medium">{!$Label.ALMS_Nothing_to_see}</div>
        </div>
    </apex:outputPanel>

</apex:component>