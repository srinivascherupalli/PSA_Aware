<apex:page controller="PSA_Events_CTRL" showHeader="false" standardStylesheets="false" sidebar="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0">

    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta charset='utf-8' />
        <!--  <apex:slds /> -->
        <c:PSA_Events_css />

        <!-- JS Pagination -->
        <apex:includeScript value="{!URLFOR($Resource.PSA_Pagination, '/Pagination/js/jquery-1.8.2.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.PSA_Pagination, '/Pagination/js/highlight.pack.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.PSA_Pagination, '/Pagination/js/tabifier.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.PSA_Pagination, '/Pagination/js/js.js')}" />
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.21/moment-timezone.min.js" ></script>
      <!--   <apex:includeScript value="{!URLFOR($Resource.PSA_Pagination, '/Pagination/js/jPages.js')}" /> -->

        <!-- CSS Pagination -->
        <apex:stylesheet value="{!URLFOR($Resource.PSA_Pagination, '/Pagination/css/jPages.css')}" />
        <apex:stylesheet value="{!URLFOR($Resource.PSA_Pagination, '/Pagination/css/animate.css')}" />

        <!-- Full Calendar JS -->
        <apex:includeScript value="{!URLFOR($Resource.PSA_Calendar, '/FullCalendar/js/moment.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.PSA_Calendar, '/FullCalendar/js/fullcalendar.min.js')}" />

        <!-- Full Calendar CSS -->
        <!-- <link href='//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.8.2/fullcalendar.min.css' rel='stylesheet'/> -->
        <apex:stylesheet value="{!URLFOR($Resource.PSA_Calendar, '/FullCalendar/css/fullcalendar.min.css')}" />
        <link href='//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.8.2/fullcalendar.print.css' rel='stylesheet' media='print' />

        <!-- Date Picker -->
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
        <apex:includeScript value="{!URLFOR($Resource.PSA_DatePicker, 'DatePicker/jquery-ui.js')}" />
        <apex:stylesheet value="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" />
 
        <style type="text/css">

            @font-face {
                font-family: 'MariadPro';
                src: url( {!URLFOR($Resource.AsMyriadProFonts, '/AsMyriadProFonts/MyriadPro-Regular.otf')});
            }
            body {
                background-color: #ffffff00;
            }
            body .event-page-wrapper {
                font-family: ''MariadPro', sans-serif';
                color: #4d575e;
                width: 98%;
            } 
 
            .event-cyan {
                color: #0083ca;
            }

            .event-blue {
                color: #004077;
            }

            .event-light-cyan {
                color: #5da7db;
            }

            .event-black {
                color: #252525;
            }

            .event-dark-grey {
                color: #4d575e;
            }

            .event-light-grey {
                color: #dcdee3;
            }

            .event-red {
                color: #b10839;
            }
            
            .event-soldout {
                color: #ffffff;
                background-color: #b0b0b0;
                        padding: 5px 2px;
            }

            .event-page-wrapper .event-h1 {
                margin-bottom: 26px;
            }

            .event-page-wrapper .event-page-monitor {
                margin-top: 1%;
                margin-bottom: 2%;
            }

            .event-list-wrap {
               /* padding-left: 5%;*/
            }

            .event-page-wrapper .event-list-wrap .event-item {
                margin: 1% auto;
                padding-top: 2%;
                padding-bottom: 2%;
            }

            .event-item .event-category--text {
                font-weight: 700;
                font-size: 13px;
            }

            .event-page-wrapper .event-item .even-date {
                font-weight: 700;
                font-size: 4em;
            }

            .event-border-right {
                border-right: 1px solid #dcdee3;
            }

            .event-page-wrapper .event-item .even-date {
                -webkit-margin-before: -0.2em;
                -webkit-margin-after: 0;
            }

            .event-page-wrapper .event-item .event-text-title {
                font-weight: 700
            }

            .event-page-wrapper .event-btn--members-only {
                background-color: #dcdee3;
                border: 1px solid #dcdee3;
                border-radius: 16px;
                padding: 4px;
                width: 100%;
                font-size: 12px;
                font-weight: 700;
                background-image: url('{!URLFOR($Resource.AsEventPageResource, '/psa-event-resources/user-icon.png')}');
                background-repeat: no-repeat;
                background-position: left;
                background-position-x: 6px;
                letter-spacing: 2px;
            }

            .event-page-wrapper .event-btn--see-details {
                width: 100%;
                background-color: #fff;
                border: 2px solid #0083ca;
                color: #0083ca;
                font-size: 13px;
                font-weight: 700;
                padding: 7px;
                letter-spacing: 3px;
            }

            .event-page-wrapper .event-btn--register {
                color: #fff;
                width: 100%;
                font-size: 13px;
                font-weight: 700;
                padding: 7px;
                border: 1px solid #0083ca;
                background-color: #0083ca;
                letter-spacing: 3px;
            }

            .event-page-wrapper .event-btn--sold-out {
                color: #fff;
                width: 100%;
                font-size: 13px;
                font-weight: 700;
                padding: 5px;
                border: 1px solid #b10839;
                background-color: #b10839;
                letter-spacing: 3px;
            }



            .event-page-wrapper .event-btn-group-item {
                margin-bottom: 11px;
            }
            #itemContainer {  padding: 0; }
            #itemContainer>li {
                display: block !important;
            }

            .event-page-wrapper .event-filter-wrap .event-filter-input {
                margin-bottom: 5%;
            }

            .event-selection .dropdown button {
                background-color: #fff;
                border: 1px solid #004077;
                border-radius: 0px;
                width: 100%;
                color: #004077;
                font-weight: 700 !important;
                font-size: 12px;
                padding: 12px;
                text-align: left;
                letter-spacing: 2px;
            }

            .event-selection .dropdown-toggle::after {
                float: right !important;
                display: inline-block;
                width: 0;
                height: 0;
                margin-left: -1.745em !important;
                vertical-align: .255em;
                content: "";
                border-top: 7px solid;
                border-right: 4px solid transparent;
                border-bottom: 0;
                border-left: .3em solid transparent;
                margin: 6px;
            }

            .event-page-wrapper .event-filter-wrap {
                background: #e9ebf0;
                min-height: 513px;
                margin: -4px;
                padding: 10%;
                margin-top: 50px;
                margin-bottom: 4%;
            }

            .event-filter-by {
                font-weight: 700;
                font-size: 14px;
                margin-bottom: 11%;
                margin-top: 7%;
            }

            #event-prev:disabled,#event-next:disabled{
                color: #b1b1b1;
                cursor: no-drop;
            }


            .btn-secondary:not(:disabled):not(.disabled).active,
            .btn-secondary:not(:disabled):not(.disabled):active,
            .show>.btn-secondary.dropdown-toggle {
                color: #004077 !important;
                background-color: #fff !important;
                border-color: #004077 !important;
            }

            .event-page-wrapper .dropdown-menu.show {
                margin: 0px;
                border: 1px solid #004077;
                border-radius: 0px;
                border-top: 1px solid #fff;
                width: 100%;
                box-shadow: 1px 3px 8px 0px #6e7f88;
            }

            .event-page-wrapper .dropdown-menu .dropdown-item {
                padding: 11px;
                color: #4d575e;
                font-weight: 500;
            }

            .event-page-wrapper .dropdown-menu {
                padding: 0px;
                color: #4d575e;
                font-weight: 500;
                height: 180px;
                overflow: auto;
            }

            .event-page-wrapper .dropdown-item.active,
            .event-page-wrapper .dropdown-item:active {
                color: #fff;
                text-decoration: none;
                background-color: #dcdee3;
            }

            .btn-secondary:not(:disabled):not(.disabled).active:focus,
            .btn-secondary:not(:disabled):not(.disabled):active:focus,
            .show>.btn-secondary.dropdown-toggle:focus {
                box-shadow: none !important;
            }


            .dropdown-menu::-webkit-scrollbar {
                width: 14px;
                height: 18px;
            }

            .dropdown-menu::-webkit-scrollbar-thumb {
                height: 6px;
                border: 4px solid rgba(0, 0, 0, 0);
                background-clip: padding-box;
                -webkit-border-radius: 7px;
                background-color: rgba(0, 0, 0, 0.15);
                -webkit-box-shadow: inset -1px -1px 0px rgba(0, 0, 0, 0.05), inset 1px 1px 0px rgba(0, 0, 0, 0.05);
            }

            .dropdown-menu::-webkit-scrollbar-button {
                width: 0;
                height: 0;
                display: none;
            }

            .dropdown-menu::-webkit-scrollbar-corner {
                background-color: transparent;
            }

            .dropdown-item .container {
                display: block;
                position: relative;
                padding-left: 35px;
                margin-bottom: 12px;
                padding-top: 14px;
                padding-bottom: 14px;
                cursor: pointer;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }

            /* Hide the browser's default checkbox */

            .dropdown-item .container input {
                position: absolute;
                opacity: 0;
                cursor: pointer;
            }

            /* Create a custom checkbox */

            .dropdown-item .checkmark {
                position: absolute;
                top: 16px;
                left: 6px;
                height: 22px;
                width: 22px;
                background-color: #fff;
                border: 1px solid #4d575e;
            }

            /* On mouse-over, add a grey background color */

            .dropdown-item .container:hover input~.checkmark {
                background-color: #ccc;
            }

            /* When the checkbox is checked, add a blue background */

            .dropdown-item input:checked~.checkmark {
                background-color: #ffffff;
                border: 1px solid #004077;
            }

            /* Create the checkmark/indicator (hidden when not checked) */

            .checkmark:after {
                content: "";
                position: absolute;
                display: none;
            }

            /* Show the checkmark when checked */

            .dropdown-item input:checked~.checkmark:after {
                display: block;
            }

            /* Style the checkmark/indicator */

            .dropdown-item .checkmark:after {
                left: 8px;
                top: 4px;
                width: 5px;
                height: 10px;
                border: solid #0083ca;
                border-width: 0 3px 3px 0;
                -webkit-transform: rotate(45deg);
                -ms-transform: rotate(45deg);
                transform: rotate(45deg);
            }

            .event-dropdown-picklist {
                padding: 0px!important; 
            }

            .ui-widget.ui-widget-content {
                width: 100%;    
            }

            .ui-widget-header{
                background: #0083ca;
                color: #ffffff; 
            }

            .ui-state-highlight,
            .ui-widget-content .ui-state-highlight, 
            .ui-widget-header .ui-state-highlight {
                border: 1px solid #79bce0!important;
                background: #0083ca!important;
                color: #ffffff!important;
            }

            .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default, .ui-button, html .ui-button.ui-state-disabled:hover, html .ui-button.ui-state-disabled:active
            {
                border-radius: 4px!important;
            }

            .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus, .ui-button:hover, .ui-button:focus
            {
                border: 1px solid #0092d8!important;
                background: #0092d8!important;
                font-weight: normal;
                margin-top: 1px;
            }

            .event-admin-calendar .ui-widget.ui-widget-content {
                height: 259px;
            }

            .holder .event-btn-pagination{
                border: 1px solid;
                background: #fff;
                color: #0083ca;
                padding: 8px;
                width: 65px;
                cursor: pointer;
            }
                   
            .holder {
                text-align: right;
            }

/*            .event-data-text{
                position: absolute;
                left: 64px;
                top: 23%;
                width: 124px; 
            }*/

    /*        .event-data-text .eventDateSelected {
                text-align: center!important;
                border-radius: 18px!important;
                background: #0083ca!important;
                border: 1px solid #0083ca!important;
                color: #ffffff!important;
                padding-left: 8px; 
                padding-right: 6px;
                padding-top: 5px; 
                padding-bottom: 5px;
                margin: -18px;
            } */

            .event-date-dp span {
                border: 1px solid #dcdee3;
                padding: 4px;
                background: #dcdee3;
                border-radius: 18px;
                padding-left: 20px;
                padding-right: 20px;
                color: #000; 
            }

            @media only screen and (min-width : 320px) and (max-width:768px){
                body .event-page-wrapper {
                    width: 94%!important;
                }
            }
        </style>
    </head>

    <body>

        <div class="event-page-wrapper">
            <div class="row clearfix">
                <div class="col-md-3">
                    <div class="event-filter-wrap">
                        <apex:form id="form1">

                            <h6 class="event-filter-by event-cyan">FILTER EVENTS BY:</h6>

                            <div class="event-filter-input">
                                <div class="event-selection">
                                    <div class="dropdown ">
                                        <button class="btn btn-secondary dropdown-toggle event-section-dropdown event-location--picklist" event-data-dropdown-id="#even-location" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="false" aria-expanded="true"  >All Regions</button>
                                        <div class="dropdown-menu" id="even-location" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item even-dropdown-select" event-locate-fucntion="location" event-value="All" href="javascript:void(0)">All Regions</a>
                                            <a class="dropdown-item even-dropdown-select" event-locate-fucntion="location" event-value="ACT" href="javascript:void(0)">Australian Capital Territory</a>
                                            <a class="dropdown-item even-dropdown-select" event-locate-fucntion="location" event-value="NSW" href="javascript:void(0)">New South Wales</a>
                                            <a class="dropdown-item even-dropdown-select" event-locate-fucntion="location" event-value="NT" href="javascript:void(0)">Northern Territory</a>
                                            <a class="dropdown-item even-dropdown-select" event-locate-fucntion="location" event-value="QLD" href="javascript:void(0)">Queensland</a>
                                            <a class="dropdown-item even-dropdown-select" event-locate-fucntion="location" event-value="SA" href="javascript:void(0)">South Australia</a>
                                            <a class="dropdown-item even-dropdown-select" event-locate-fucntion="location" event-value="TAS" href="javascript:void(0)">Tasmania</a>
                                            <a class="dropdown-item even-dropdown-select" event-locate-fucntion="location" event-value="VIC" href="javascript:void(0)">Victoria</a>
                                            <a class="dropdown-item even-dropdown-select" event-locate-fucntion="location" event-value="WA" href="javascript:void(0)">Western Australia</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="event-filter-input">
                                <div class="event-selection">
                                    <div class="dropdown">
                                        <button class="btn btn-secondary dropdown-toggle event-section-dropdown" event-data-dropdown-id="#even-type" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false"> TOPIC</button>
                                        <div class="dropdown-menu" id="even-type" style="height: 353px!important;" aria-labelledby="dropdownMenuButton">

                                            <script type="text/javascript">
                                                var picklistEvent = '';
                                                var OBJECT_CATEGORY = [];
                                            </script>

                                            <apex:repeat value="{!PickListValuesEventType}" var="eventType">

                                                <script type="text/javascript">

                                                    picklistEvent+=' <a class="dropdown-item event-dropdown-picklist"   href="javascript:void(0)">';
                                                    picklistEvent+=" <label class='container'>{!eventType}";

                                                    var eventValue = "{!eventType}";
                                                    eventValue = eventValue.replace(/\s/g, "").replace(/\'/g, "").toLowerCase();

                                                    var eventValueAttr = "{!eventType}".replace(/\'/g, "_S_");

                                                    picklistEvent+="<input type='checkbox' id='event-value-"+ eventValue.toString() +"' event-value='"+ eventValueAttr +"'"; 
                                                    picklistEvent+='event-locate-fucntion="eventType"    />';
                                                    picklistEvent+='  <span class="checkmark"></span>';
                                                    picklistEvent+='  </label>';
                                                    picklistEvent+=' </a>';
                                                    OBJECT_CATEGORY[( "{!eventType}".replace(/\s/g, "").toLowerCase() )] =eventValueAttr; 
                                                  

                                                </script>
 
                    
                                            </apex:repeat>

                                            <script type="text/javascript">

                                                jQuery('#even-type').html(picklistEvent);
                                            </script>


                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="event-filter-input">
                                <div class="event-selection">
                                    <div class="dropdown ">
                                        <button class="btn btn-secondary dropdown-toggle event-section-dropdown" event-data-dropdown-id="#even-Interest-group" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false">FORMAT </button>

                                        <div class="dropdown-menu" id="even-Interest-group" aria-labelledby="dropdownMenuButton" style="height: 353px!important;">
                                            <apex:repeat value="{!PickListValuesInterestGroup}" var="interestGroup">
         
                                                <a class="dropdown-item event-dropdown-picklist"  href="javascript:void(0)">
                                                      <label class="container">{!interestGroup}
                                                        <input type="checkbox" event-value="{!interestGroup}"   event-locate-fucntion="interestgroup"  />
                                                        <span class="checkmark"></span>
                                                    </label>
                                                </a>

                                            </apex:repeat>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <div class="event-filter-input">
                                <a class="eventDateSelected" style="color: #0083ca;text-decoration: underline;cursor: pointer;" > clear </a>
                                <div class="event-selection">
                                    <div class="dropdown" >
                                        
                                        <button class="btn btn-secondary dropdown-toggle event-section-dropdown event-date-dp" event-data-dropdown-id="#even-date" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false">DATE:</button>
                    
                                        <div class="dropdown-menu" id="even-date" aria-labelledby="dropdownMenuButton" style="height: 284px;">
                                            <div id="datepickerEventData" class="evendatepicker" data-date="12/03/2012"></div>
                                            <input type="hidden" id="my_hidden_input"/>
                                        </div>
                                    </div>
                                </div> 
                            </div>
                            
                        </apex:form>
                    </div>
<!--                     <div class="event-filter-wrap event-admin-calendar" style="padding: 8%;min-height: 300px;">
                         <div id="datepicker" class="evendatepicker" data-date="12/03/2012"></div>
                    </div> -->
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-8">
                    <div class="event-list-wrap">
                        <div class="row">
                            <div class="col-md-9"></div>
                            <div class="col-md-3">
                                <div class="event-contents" style="width: 94%;">
                                    <div id="btn-calendar-view" style="text-align: right;">
                                        <!--<button class=" event-btn--see-details" id="btn-color2" >
                                          Calendar View 
                                        </button>-->
                                    </div> 
                                    <div id="btn-show-List" style="display:none;text-align: right;">
                                        <button class=" event-btn--see-details" id="btn-color2" >
                                          List View
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <apex:outputPanel id="evs" styleClass="">
                            <div class="" id="disable-card">
                                <div class="event-page-monitor">
                                    <p id="event-filter-summary"></p>
                                    <hr/>
                                </div>
                                <!-- navigation holder -->
                                <div class="holder">
                                </div>                                            
                                <ul id="itemContainer" >
                                </ul>
                                <!-- navigation holder -->
                                <div class="holder" id="event-holder-pagination">
                                    <button class="event-btn-pagination" data-type="prev" id="event-prev" >Prev</button> <span class="event-page-level"> Page 0 to 0 </span> <button data-type="next"  class="event-btn-pagination" id="event-next">Next</button>
                                </div>
                            </div>
                            <div class="slds-grid" id="ViewCalendar" style="">
                                <div class="slds-col">
                                    <div id="calendar" style="padding-top:2%; padding-left:3.4%; width:96.5%;"></div>
                                </div>
                            </div>
                        </apex:outputPanel>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">

            /* TimeZone */
            moment.tz.add('Australia/Sydney|AEST AEDT|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|40e5');

            var ObjectEvent = {
               'location'  :'',
               'eventType' : [],
               'interestgroup': [],
               'campaigndate' : '',
               'searchAll':''

            }

            var BUTTON_THIS ='';

            var LOCATION = {
                'ACT' : 'Australian Capital Territory', 
                'NSW' : 'New South Wales',  
                'NT'  : 'Northern Territory',      
                'QLD' : 'Queensland',       
                'SA' : 'South Australia',       
                'TAS' : 'Tasmania',     
                'VIC' : 'Victoria', 
                'WA' : 'Western Australia',                 
            }

 
            var eventController = {
                filterCampaign : function( param , callback ) {

                    Visualforce.remoting.Manager.invokeAction( 
                        '{!$RemoteAction.PSA_Events_CTRL.filterCampaign}',
                        param,
                        function( result, event ) {
                            callback( result );
                        }
                    );  

                },
                globalfilterCampaign : function( param , callback ) {

                    Visualforce.remoting.Manager.invokeAction( 
                        '{!$RemoteAction.PSA_Events_CTRL.globalfilterCampaign}',
                        param,
                        function( result, event ) {
                            callback( result );
                        }
                    );  

                },
                loadAllEvent : function( res , index ) {

                  
                    if(  res.length != 0 ){

                        var resDevided = Math.ceil( res.length / 5 );
                        var pageObject = [];
                        var pageArray  = [];
                        var countPage = 0;
                        var indexPage = 0;
                        for (var i = 0; i < res.length; i++) {

                            var r = res[i];

                            if( countPage < 4  ){

                                if( (indexPage + 1) ==  resDevided   ){

                                    pageObject[ countPage ]= r;
                                    countPage +=1;
                                    if( countPage == ( res.length % 5 ) ){
                                        pageArray.push(pageObject);
                                    }
                    
                                } else {

                                    pageObject[ countPage ]= r;
                                    countPage +=1;

                                }

                            } else { 
                                pageObject[ countPage ]= r;
                                countPage +=1;
                                pageArray.push(pageObject);
                                countPage = 0; 
                                indexPage +=1;
                                pageObject = [];
                            }

                        } 
                       
            
                        eventController.displayListOfEvent(pageArray,index);

                        var ListIndex = 0;

                        $('#event-holder-pagination').show();
                        $('.event-page-level').text('Page '+( ListIndex + 1 )+' to '+resDevided);
                        $('#event-prev').prop('disabled',true);

                        if( resDevided == 1 ){
                            $('#event-next').prop('disabled',true);
                        }

                        $('.event-btn-pagination').click(function(){

                            var btnType = $(this).attr('data-type');
                            if( btnType == 'prev' ){
                                ListIndex -=1;
                            } else {
                                ListIndex +=1;
                            } 

                            $('.event-btn-pagination').prop('disabled',false);
                 
                 
                            if( ListIndex == 0 ){
                                $('#event-prev').prop('disabled',true);
                            }

                            if( ( ListIndex + 1 ) == resDevided   ){
                                $('#event-next').prop('disabled',true);
                            }
 

                            if( typeof pageArray[ListIndex] !== 'undefined' ){

                                $('.event-page-level').text('Page '+( ListIndex + 1 )+' to '+resDevided);
                                eventController.displayListOfEvent( pageArray,  ListIndex );

                            } 
 
                        }); 
 
                    } else {
                        $('#event-holder-pagination').hide();
                        $('#itemContainer').html('');
                    }

                },
                displayListOfEvent : function( pageArray , index ){
                    var htmlEvents  = '';
                    var resPaginate = pageArray[index];
                    for (var i = 0; i < resPaginate.length; i++) {

                        var r =resPaginate[i];
                 
                        var startDate = new Date(r.StartDate); 
                        var startTime = new Date(r.AS_Start_Time__c);
                        var endTime = new Date(r.AS_End_Time__c);
                        // console.log(r.AS_Start_Time__c);
                        // console.log( r.Name  , moment( startTime ).tz("Australia/Sydney").format()  );
                        htmlEvents+='<li> '; 
                        htmlEvents+='   <div class="row clearfix event-item">';
                        htmlEvents+='       <div class="col-xs-12 col-md-2 text-center event-border-right">';
                        htmlEvents+='           <h1 class="even-date event-black">';
                        htmlEvents+='             '+ ('0' + startDate.getDate() ).slice(-2)  +' ';
                        htmlEvents+='           </h1>';
                        htmlEvents+='           <h5 class="even-month event-black">';
                        htmlEvents+='            '+ MONTHS_NAME[startDate.getMonth() ] ;
                        htmlEvents+='           </h5>';
                        htmlEvents+='           <p class="even-time">';
                        htmlEvents+='               '+ moment( startTime ).tz("Australia/Sydney").format("hh:mm A") +'<br/> '+  moment( endTime ).tz("Australia/Sydney").format("hh:mm A") ;
                        htmlEvents+='           </p>';
                        htmlEvents+='       </div>';
                        htmlEvents+='       <div class="col-xs-12 col-md-7">';
                        //Removed from page htmlEvents+='           <p class="event-cyan event-category--text">CATEGORY</p>';
                        
                        
                        // added for (#PSA-326)
                        if( r.AS_Remaining_Seats__c <= 0 ){
                            htmlEvents+='           <p class="event-soldout event-text-title"> '+ r.Name +' </p>';
                        } else {
                            htmlEvents+='           <h6 class="event-blue event-text-title"> '+ r.Name +' </h6>';
                        }
                        
                        htmlEvents+='           <p>  '+ (typeof r.AS_Location__c !== 'undefined' ? r.AS_Location__c:'') +' </p>';
                        htmlEvents+='           <p> Event Capacity: '+ (typeof r.AS_Total_Capacity__c !== 'undefined' ? r.AS_Total_Capacity__c:'0') +' <br/> Spots Remaining: '+ r.AS_Remaining_Seats__c +'</p>';                      
                        htmlEvents+='       </div>';
                        htmlEvents+='       <div class="col-xs-12 col-md-3 text-center">';
                        // htmlEvents+='           <div class="event-btn-group-item">';
                        // htmlEvents+='               <button type="button" class="event-btn--see-details">SEE DETAILS</button>';
                        // htmlEvents+='           </div>';

                        if( r.AS_Remaining_Seats__c <= 0 ){

                            htmlEvents+='           <div class="event-btn-group-item">';
                            htmlEvents+='               <button type="button" class="event-btn--sold-out">SOLD OUT</button>';
                            htmlEvents+='           </div>';
 
                        } else {
                                var theUrl = '';
                                var theTarget = '';
                                if(typeof r.AS_Training_Plan_URL__c !== 'undefined') {
                                    
                                    theUrl = r.AS_Training_Plan_URL__c;
                                    theTarget = '_blank';

                               } else if ( typeof r.AS_Event_URL__c !== 'undefined' ) {

                                    theUrl = r.AS_Event_URL__c;
                                    theTarget = '_blank';

                                } else {

                                     theUrl = '#';

                                }

                            htmlEvents+='           <div class="event-btn-group-item">';
                            htmlEvents+='               <a target="'+ theTarget +'" href="'+ theUrl +'" ><button type="button" class="event-btn--register">REGISTER</button> </a>';
                            htmlEvents+='           </div>';
                        }

                        htmlEvents+='       </div>';
                        htmlEvents+='   </div>';
                        htmlEvents+='   <hr/>';
                        htmlEvents+='</li>';

                    }

                    $('#itemContainer').html(htmlEvents);
                },
                eventGenerateEventSelectedFilterSummary : function(){
                    var htmlSummary = '';
                    if( ObjectEvent.campaigndate != '' ){
                        htmlSummary +=' Date: <Strong>'+ ObjectEvent.campaigndate +'</Strong>';
                    }
                    if( ObjectEvent.eventType.length != 0 ){
                        htmlSummary +=' Topic: ';
                        var htmlCategory ='';
                        for (var i = 0; i < ObjectEvent.eventType.length; i++) {
                            var r =  ObjectEvent.eventType[i];
                            htmlCategory += "<Strong>"+ r +"</Strong>,";
                        }
                        console.log( htmlCategory.slice(0, -1) );
                        htmlSummary += htmlCategory.slice(0, -1); 
                    }
                    if( ObjectEvent.interestgroup.length != 0 ){
                        htmlSummary +=' Format: ';
                        var htmlIntGroup='';
                        for (var i = 0; i < ObjectEvent.interestgroup.length; i++) {
                            var r =  ObjectEvent.interestgroup[i]; 
                            htmlIntGroup += "<Strong>"+ r +"</Strong>,";
                        }
                        htmlSummary += htmlIntGroup.slice(0, -1);
                    }
                    if( ObjectEvent.location != '' ){
                        htmlSummary +=' Location:  <Strong>'+  RAGIONS_MAP[ ObjectEvent.location.toUpperCase() ]  +' </Strong> ';
                    }
                    if( ObjectEvent.searchAll != '' ){
                        console.log('ObjectEvent.searchAll  ==> ', ObjectEvent.searchAll );
                        htmlSummary +=' Search key:  <Strong>'+ ObjectEvent.searchAll  +' </Strong> ';
                    }
                    if( htmlSummary != '' ){
                        $('#event-filter-summary').html('Showing : '+htmlSummary);
                    } else {
                        $('#event-filter-summary').html('');
                    } 
                    
                }
            }

            var MONTHS_NAME = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

            var RAGIONS_MAP =   {
                                    'All':'All Region',
                                    'ACT':'Australian Capital Territory',
                                    'NSW':'New South Wales',
                                    'NT':'Northern Territory',
                                    'QLD':'Queensland',
                                    'SA':'South Australia',
                                    'TAS':'Tasmania',
                                    'VIC':'Victoria',
                                    'WA':'Western Australia'
                            };

            var psaEvents = {
                allEvents : function(){
                    var param = JSON.stringify( ObjectEvent );

                    eventController.filterCampaign( param , function( res ){

                        eventController.loadAllEvent( res , 0 );
                        
                    });
                },
                initAllEvents : function(){

                    var ulrSearchArray =  getAllUrlParams(window.location.href);
                   
                    for (var key in ulrSearchArray) {
                        if ( ulrSearchArray.hasOwnProperty(key) ) {
        
                            if(  key.includes("search")  ){
                                console.log('decodeURIComponent(ulrSearchArray[key]) => ',decodeURIComponent(ulrSearchArray[key]));
                                eventFilterFunction.searchAll( decodeURIComponent(ulrSearchArray[key]) );

                            } else {

                                if(  key.includes("category") ){

                                    if( ulrSearchArray[key] != 'all' ){

                                        $('#event-value-'+ulrSearchArray[key]).prop('checked',true);
                                        eventFilterFunction.eventType( OBJECT_CATEGORY[ ulrSearchArray[key] ] , 'add' );

                                    }

                                } 
                                if(  key.includes("location") ){ 

                                    if( ulrSearchArray[key] == 'all' ){ 
                                        $('.event-location--picklist').text('All Region');
                                        eventFilterFunction.location('All');
                                    } else {
                                        eventFilterFunction.location(ulrSearchArray[key].toUpperCase());
                                        $('.event-location--picklist').text(RAGIONS_MAP[ulrSearchArray[key].toUpperCase()]);
                                    }

                                }

                            }

                        }

                    }

                    var param = JSON.stringify( ObjectEvent )
                    eventController.filterCampaign( param , function( res ){

                        eventController.loadAllEvent( res , 0 );
                        
                    });

                    //psaEvents.allEvents();
                    eventController.eventGenerateEventSelectedFilterSummary();

                },
                searchEvent : function( param ){
                    eventController.globalfilterCampaign(param, function( res ){
                        eventController.loadAllEvent( res , 0 );
                    });
                }
            }

        //    psaEvents.searchEvent('Immu');

            var eventFilterFunction = { 
                location: function( data ) {
    
                    if( data == 'All' ){
                        ObjectEvent.location = '';  
                        $('.event-location--picklist').text('All Region');
                    } else {
                        ObjectEvent.location = data;
                        $('.event-location--picklist').text(LOCATION[data]);
                    }

                    $('.dropdown-menu').removeClass('show');
                    $(BUTTON_THIS).attr('aria-haspopup', 'false');
                    
                    eventController.eventGenerateEventSelectedFilterSummary();

                },
                eventType : function( data , method){
                    if( method == 'add' ){
                        ObjectEvent.eventType.push( data );
                    } else {
                        ObjectEvent.eventType = ObjectEvent.eventType.filter(function(e) { return e !== data });
                    }
 
                    eventController.eventGenerateEventSelectedFilterSummary();
                },
                interestgroup : function( data , method){
                    if( method == 'add' ){
                        ObjectEvent.interestgroup.push( data );
                    } else {
                        ObjectEvent.interestgroup = ObjectEvent.interestgroup.filter(function(e) { return e !== data });
                    }
                    eventController.eventGenerateEventSelectedFilterSummary();
                },
                campaigndate : function( data ){
                    ObjectEvent.campaigndate = data;
                    eventController.eventGenerateEventSelectedFilterSummary();
                },
                searchAll : function(data) {
                    ObjectEvent.searchAll = data;
                    eventController.eventGenerateEventSelectedFilterSummary();
                } 

            };
 

            $(function() {

                $('.evendatepicker').datepicker();

                $('#datepickerEventData').on('change', function() {
                    var date = new Date( $(this).val() );
                    var dateValueFormated  = date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate();
                     $('.event-date-dp').html( 'DATE: <span>'+dateValueFormated +'</span> '  );
                    eventFilterFunction.campaigndate( dateValueFormated );
                    psaEvents.allEvents();
                });

                $(document).on('click', '.eventDateSelected', function(){
                    $('.event-date-dp').html('DATE:');
                    eventFilterFunction.campaigndate( '' ); 
                    psaEvents.allEvents();
                });

               // psaEvents.allEvents();
               psaEvents.initAllEvents();
               //psaEvents.searchEvent('Immu');

                // Btn Calendar 
                $("#btn-calendar-view").on('click', function() {

                    //  $(".slds-select").attr('disabled','true');
                    $(this).fadeOut().hide();
                    $("#btn-show-List").fadeIn("slow").show();
                    $("#btn-search-1").fadeOut().hide();
                    $("#btn-search-2").fadeIn("slow").show();
                    $("#itemContainer").fadeOut().hide();
                    $("#pagination").fadeOut().hide();
                    $("#ViewCalendar").fadeIn().show(function() {
                        LoadCalendar();
                    });
                    $('.holder').hide();
                    

                });

                $("#btn-show-List").on('click', function() {
                    $(this).fadeOut().hide();
                    $("#btn-calendar-view").fadeIn("slow").show();

                    $("#btn-search-2").fadeOut().hide();
                    $("#btn-search-1").fadeIn("slow").show();

                    $("#itemContainer").fadeIn("slow").show();
                    $("#pagination").fadeIn("slow").show();
                    $("#ViewCalendar").fadeOut().hide();
                    $('.holder').show();
                });

              
                $('.event-section-dropdown').on('click', function() {
                    var dropdownId = $(this).attr('event-data-dropdown-id');
                    var dropdownToggle = $(this).attr('aria-haspopup');
                    $('.dropdown-menu').removeClass('show');
                    BUTTON_THIS = $(this);
                    if (dropdownToggle == 'false') {
                        $(dropdownId).addClass('show');
                        $(this).attr('aria-haspopup', 'true');
                    } else {
                        $('.dropdown-menu').removeClass('show');
                        $(this).attr('aria-haspopup', 'false');
                    }
                });
     
                $(document).on('click', '.even-dropdown-select', function(){

                    var targetFunction = $( this ).attr('event-locate-fucntion');
                    var eventValue = $(this).attr('event-value');

                    eventFilterFunction[ targetFunction ]( eventValue );

                    psaEvents.allEvents();
                });

                $(document).on('change', '.event-dropdown-picklist input', function(){
                        
                    var targetFunction = $(this).attr('event-locate-fucntion');
                    var data = $(this).attr('event-value');
                    data = data.replace('_S_', "\'"); 
                    var re = new RegExp('_S_', 'g');
                    data = data.replace(re, "\'");

                    if( $(this).is(":checked") ){

                        eventFilterFunction[targetFunction]( data , 'add' );
                    } else {
                        eventFilterFunction[targetFunction]( data , 'remove' );
                    }
                    psaEvents.allEvents();

                });

            });


        /*
        * Author : Jet
        * Description: use to get the variable value in the url.
        * Parameter : name of the variable.
        * Return : Opportuninty Id. 
        */
        var getUrlVar = function ( name ) {

             name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
             var regexS = "[\\?&]" + name + "=([^&#]*)";
             var regex = new RegExp(regexS);
             var results = regex.exec(window.location.href);
             if (results == null){
                return "";
             }else{
                return results[1];
             }

        };

        function getAllUrlParams(url) {

          // get query string from url (optional) or window
          var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

          // we'll store the parameters here
          var obj = {};

          // if query string exists
          if (queryString) {

            // stuff after # is not part of query string, so get rid of it
            queryString = queryString.split('#')[0];

            // split our query string into its component parts
            var arr = queryString.split('&');

            for (var i=0; i<arr.length; i++) {
              // separate the keys and the values
              var a = arr[i].split('=');

              // in case params look like: list[]=thing1&list[]=thing2
              var paramNum = undefined;
              var paramName = a[0].replace(/\[\d*\]/, function(v) {
                paramNum = v.slice(1,-1);
                return '';
              });

              // set parameter value (use 'true' if empty)
              var paramValue = typeof(a[1])==='undefined' ? true : a[1];

              // (optional) keep case consistent
              paramName = paramName.toLowerCase();
              paramValue = paramValue.toLowerCase();

              // if parameter name already exists
              if (obj[paramName]) {
                // convert value to array (if still string)
                if (typeof obj[paramName] === 'string') {
                  obj[paramName] = [obj[paramName]];
                }
                // if no array index number specified...
                if (typeof paramNum === 'undefined') {
                  // put the value on the end of the array
                  obj[paramName].push(paramValue);
                }
                // if array index number specified...
                else {
                  // put the value at that index number
                  obj[paramName][paramNum] = paramValue;
                }
              }
              // if param name doesn't exist yet, set it
              else {
                obj[paramName] = paramValue;
              }
            }
          }

          return obj;
        }

        </script>




        <script type="text/javascript">
            $(function() {
                $('[id$="datestart"]').datepicker({
                    dateFormat: 'yy-mm-dd'
                }).bind("change", function() {
                    var minValue = $(this).val();
                    minValue = $.datepicker.parseDate("yy-mm-dd", minValue);
                    minValue.setDate(minValue.getDate() + 1);
                });
            });

            $(function() {
                $('[id$="dateEnd"]').datepicker({
                    dateFormat: 'yy-mm-dd'
                }).bind("change", function() {
                    var minValue = $(this).val();
                    minValue = $.datepicker.parseDate("yy-mm-dd", minValue);
                    minValue.setDate(minValue.getDate() + 1);
                });
            });

            function ResetForm() {
                document.getElementById('{!$Component.form1}').reset();
            }

            // Calendar
            function LoadCalendar() {
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.PSA_Events_CTRL.eventdata}',
                    function(result, event) {
                        if (event.status) {
                            evt = JSON.parse(result);
                            $('#calendar').fullCalendar({
                                header: {
                                    left: 'prev,next today',
                                    center: 'title',
                                    right: 'month,agendaWeek,agendaDay,listWeek'
                                },
                                themeSystem: 'standard',
                                defaultView: 'month',
                                contentHeight: 520,
                                navLinks: true,
                                editable: false,
                                disableDragging: false,
                                eventLimit: true,
                                eventMouseover: function(calEvent, jsEvent) {

                                    var tooltip = '<div class="tooltipevent">' +
                                        '<p class="text-concat" style="">Name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;' + '<b>' + calEvent.title + '</b></p><br/>' +
                                        '<p>Start &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : ' + calEvent.start.format('DD MMM, YYYY h:mm a') + '</p><br/>' +
                                        '<p>End &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : ' + calEvent.end.format('DD MMM, YYYY h:mm a') + '</p><br/>' +
                                        '<p>Attendees &nbsp;&nbsp; :&nbsp;' + calEvent.attendees + '</p><br/>' +
                                        '<p>Seats left &nbsp;&nbsp;&nbsp; :&nbsp;' + calEvent.seats + '</p><br/>' +
                                        '<p class="text-concat">Description &nbsp;: ' + calEvent.descrip + '</p><br/>' +
                                        '<p class="">Location &nbsp;&nbsp;&nbsp;&nbsp; : ' + calEvent.location + '</p></div>';

                                    var $tooltip = $(tooltip).appendTo('body');

                                    $(this).mouseover(function(e) {
                                        $(this).css('z-index', 10000);
                                        $tooltip.fadeIn("slow");
                                        $tooltip.fadeTo('10', 1.9);
                                    }).mousemove(function(e) {
                                        $tooltip.css('top', e.pageY + 10); 
                                        $tooltip.css('left', e.pageX + 13);
                                    });
                                },

                                eventMouseout: function(calEvent, jsEvent) {
                                    $(this).css('z-index', 8);
                                    $('.tooltipevent').remove();
                                },
                                events: evt
                            })

                        } else if (event.type === 'exception') {
                            console.log(event.message);
                        } else {
                            console.log(event.message);
                        }
                    }, {
                        escape: false
                    }
                );
            }
        </script>



 
    </body>
</apex:page>